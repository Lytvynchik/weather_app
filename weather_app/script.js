const url = `https://api.openweathermap.org/data/2.5/weather?&appid=f01403a8c522f6902916c55f779eb9e7`;
const urlFiveDays = `https://api.openweathermap.org/data/2.5/forecast?&appid=f01403a8c522f6902916c55f779eb9e7`;

const mainBlock = document.querySelector('main');

const form = document.forms.namedItem('navigation-formCity');
form.addEventListener('submit', e => {
    e.preventDefault();
    console.log(form);
    mainBlock.style.overflowX = "scroll";
    mainBlock.innerHTML = "";
    cityRequest();
    queryBtn.value = '';
});

const queryBtn = document.querySelector('.queryCity');
queryBtn.addEventListener('input', e => {
    query = e.target.value;;
});

const cityRequest = () => {

    localStorage.setItem('lastRequest', query);

    Promise.all([
        fetch(url + `&q=${localStorage.getItem('lastRequest')}`).then(res => res.json()),
        fetch(urlFiveDays + `&q=${localStorage.getItem('lastRequest')}`).then(res => res.json()),
    ]).then(([dataCurrent, dataForecast]) => {

            const values = {
                city                  : dataCurrent.name,
                country               : dataCurrent.sys.country,
                time                  : dataCurrent.dt,
                timezone              : dataCurrent.timezone,
                lon                   : dataCurrent.coord.lon,
                lat                   : dataCurrent.coord.lat,
                temp                  : dataCurrent.main.temp,
                tempFeelsLike         : dataCurrent.main.feels_like,
                tempMin               : dataCurrent.main.temp_min,
                tempMax               : dataCurrent.main.temp_max,
                sunrise               : dataCurrent.sys.sunrise,
                sunset                : dataCurrent.sys.sunset,
                humidity              : dataCurrent.main.humidity,
                pressure              : dataCurrent.main.pressure,
                visibility            : dataCurrent.visibility,
                windSpeed             : dataCurrent.wind.speed,
                phenomena             : dataCurrent.weather[0].main,
                weatherTypeDescription: dataCurrent.weather[0].description,
                icon                  : dataCurrent.weather[0].icon,
            };
    
            const UTCtime = new Date((values.time + values.timezone - 7200) * 1000);
            const UTCsunrise = new Date((values.sunrise + values.timezone - 7200) * 1000);
            const UTCsunset = new Date((values.sunset + values.timezone - 7200) * 1000);
    
            console.log(localStorage.getItem('lastRequest'));
    
            const containerWrapper = document.querySelector('.container__about');
            containerWrapper.innerHTML = `
            <div class="container__about__weather">
    
                <ul class="container__about__weather__list">
    
                    <li class="container__about__weather__item">
                        <p><span>
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 3C9.61302 3 7.32382 3.94819 5.63596 5.63596C3.94819 7.32382 3 9.61306 3 12C3 14.3869 3.94819 16.6762 5.63596 18.364C7.32382 20.0518 9.61306 21 12 21C14.3869 21 16.6762 20.0518 18.364 18.364C20.0518 16.6762 21 14.3869 21 12C21 9.61306 20.0518 7.32382 18.364 5.63596C16.6762 3.94819 14.3869 3 12 3V3ZM11.7 3.66294V20.3369C10.5 19.8509 9.30003 16.5659 9.30003 12.0001C9.30003 7.43433 10.5 4.14911 11.7 3.66328V3.66294ZM12.3 20.3366V3.66294C13.5 4.14897 14.7 7.43398 14.7 11.9998C14.7 16.5655 13.5 19.8508 12.3 20.3366ZM8.70004 11.9998C8.70004 15.2487 9.36606 18.5788 10.539 20.1175C8.10004 19.1666 6.29996 15.8997 6.29996 11.9998C6.29996 8.0998 8.09994 4.83276 10.539 3.88202C9.36606 5.42099 8.70004 8.75088 8.70004 11.9998ZM15.3 11.9998C15.3 8.75081 14.6339 5.42075 13.461 3.88202C15.9 4.83289 17.7 8.0998 17.7 11.9998C17.7 15.8997 15.9001 19.1668 13.461 20.1175C14.6339 18.5785 15.3 15.2486 15.3 11.9998V11.9998ZM3.6001 11.9998C3.60036 10.3285 4.09926 8.6951 5.03285 7.30884C5.96643 5.92269 7.29232 4.84647 8.84092 4.21781C6.96287 5.78088 5.69993 8.68176 5.69993 11.9999C5.69993 15.318 6.96287 18.2189 8.84092 19.782C7.29218 19.1533 5.9663 18.0771 5.03285 16.691C4.09926 15.3047 3.60037 13.6713 3.6001 12V11.9998ZM15.159 19.7818C17.0371 18.2188 18.3 15.3179 18.3 11.9998C18.3 8.68163 17.0371 5.78075 15.159 4.21768C16.7071 4.84674 18.0323 5.92324 18.9654 7.30953C19.8985 8.69568 20.3968 10.3287 20.3968 11.9998C20.3968 13.6709 19.8985 15.3037 18.9654 16.69C18.0325 18.0763 16.7073 19.1528 15.159 19.7818Z" fill="black" stroke="black" stroke-width="0.3"/>
                            </svg>
                        </span>Lon:</p>
                        <p>${values.lon}</p>
                    </li>
    
                    <li class="container__about__weather__item">
                        <p><span>
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 3C9.61302 3 7.32382 3.94819 5.63596 5.63596C3.94819 7.32382 3 9.61306 3 12C3 14.3869 3.94819 16.6762 5.63596 18.364C7.32382 20.0518 9.61306 21 12 21C14.3869 21 16.6762 20.0518 18.364 18.364C20.0518 16.6762 21 14.3869 21 12C21 10.4202 20.5842 8.86824 19.7943 7.50005C19.0044 6.13186 17.8682 4.99575 16.5001 4.20585C15.1319 3.41595 13.5799 3.0001 12.0001 3.0001L12 3ZM15.7769 4.49998H8.22279C9.39397 3.90829 10.6877 3.60013 11.9997 3.60013C13.3116 3.60013 14.6055 3.9083 15.7765 4.49998H15.7769ZM7.21788 5.09998H16.7818C17.4999 5.59886 18.1365 6.20609 18.6687 6.89996H5.33099C5.8632 6.20609 6.49978 5.59886 7.21788 5.09998V5.09998ZM4.04704 14.6999H19.9469C19.7304 15.3317 19.4405 15.9359 19.0828 16.4998H4.91401C4.55429 15.9365 4.26314 15.3323 4.04711 14.6999H4.04704ZM3.86704 14.0999C3.71222 13.5115 3.62276 12.9079 3.59999 12.2999H20.3998C20.38 12.9075 20.2935 13.5111 20.1419 14.0999H3.86704ZM3.59999 11.6999C3.61981 11.0923 3.70633 10.4887 3.85793 9.89992H20.1328C20.2877 10.4883 20.3771 11.0919 20.3999 11.6999H3.59999ZM4.03792 9.29993C4.25407 8.66754 4.5451 8.06326 4.90496 7.49995H19.0888C19.4465 8.06391 19.7365 8.66805 19.9528 9.29993H4.03792ZM8.22278 19.4998H15.7769C14.6057 20.0915 13.3119 20.3997 12 20.3997C10.6881 20.3997 9.39417 20.0915 8.22313 19.4998H8.22278ZM16.7818 18.8998H7.21788C6.49977 18.4009 5.8632 17.7937 5.33099 17.0998H18.6687C18.1365 17.7937 17.4999 18.4009 16.7818 18.8998Z" fill="black" stroke="black" stroke-width="0.3"/>
                            </svg>
                        </span>Lat:</p>
                        <p>${values.lat}</p>
                    </li>
    
                    <li class="container__about__weather__item">
                        <p><span>
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M11.5582 3.18361C11.6162 3.12541 11.6852 3.07923 11.7611 3.04772C11.837 3.01622 11.9184 3 12.0006 3C12.0828 3 12.1642 3.01622 12.2402 3.04772C12.3161 3.07923 12.385 3.12541 12.4431 3.18361L14.318 5.05849C14.3761 5.11659 14.4222 5.18558 14.4536 5.2615C14.4851 5.33742 14.5013 5.41879 14.5013 5.50096C14.5013 5.58314 14.4851 5.66451 14.4536 5.74043C14.4222 5.81634 14.3761 5.88533 14.318 5.94343C14.2599 6.00154 14.1909 6.04763 14.115 6.07908C14.0391 6.11053 13.9577 6.12671 13.8755 6.12671C13.7933 6.12671 13.712 6.11053 13.636 6.07908C13.5601 6.04763 13.4911 6.00154 13.433 5.94343L12.6256 5.13473V7.37584C12.6256 7.54159 12.5597 7.70056 12.4425 7.81776C12.3253 7.93496 12.1664 8.0008 12.0006 8.0008C11.8349 8.0008 11.6759 7.93496 11.5587 7.81776C11.4415 7.70056 11.3757 7.54159 11.3757 7.37584V5.13473L10.5682 5.94343C10.5101 6.00154 10.4411 6.04763 10.3652 6.07908C10.2893 6.11053 10.2079 6.12671 10.1257 6.12671C10.0436 6.12671 9.9622 6.11053 9.88628 6.07908C9.81036 6.04763 9.74138 6.00154 9.68327 5.94343C9.62516 5.88533 9.57907 5.81634 9.54762 5.74043C9.51618 5.66451 9.49999 5.58314 9.49999 5.50096C9.49999 5.41879 9.51618 5.33742 9.54762 5.2615C9.57907 5.18558 9.62516 5.11659 9.68327 5.05849L11.5582 3.18361ZM4.92982 7.17961C5.04701 7.06244 5.20595 6.99663 5.37166 6.99663C5.53738 6.99663 5.69631 7.06244 5.81351 7.17961L7.5809 8.947C7.69474 9.06486 7.75774 9.22273 7.75631 9.38659C7.75489 9.55046 7.68916 9.7072 7.57329 9.82308C7.45742 9.93895 7.30067 10.0047 7.13681 10.0061C6.97294 10.0075 6.81508 9.94453 6.69721 9.83069L4.92982 8.0633C4.81265 7.9461 4.74684 7.78717 4.74684 7.62145C4.74684 7.45574 4.81265 7.2968 4.92982 7.17961ZM19.0714 7.17961C19.1886 7.2968 19.2544 7.45574 19.2544 7.62145C19.2544 7.78717 19.1886 7.9461 19.0714 8.0633L17.304 9.83069C17.2464 9.89038 17.1774 9.93799 17.1012 9.97075C17.0249 10.0035 16.9429 10.0207 16.8599 10.0215C16.777 10.0222 16.6947 10.0064 16.6179 9.97495C16.5411 9.94352 16.4713 9.89712 16.4126 9.83844C16.3539 9.77976 16.3075 9.70998 16.2761 9.63317C16.2447 9.55637 16.2289 9.47407 16.2296 9.39109C16.2303 9.30811 16.2475 9.2261 16.2803 9.14986C16.313 9.07361 16.3607 9.00465 16.4204 8.947L18.1877 7.17961C18.3049 7.06244 18.4639 6.99663 18.6296 6.99663C18.7953 6.99663 18.9542 7.06244 19.0714 7.17961ZM12.0006 10.5006C12.6589 10.5004 13.3057 10.6736 13.8759 11.0026C14.4461 11.3316 14.9196 11.805 15.2489 12.375C15.5781 12.9451 15.7515 13.5918 15.7515 14.2501C15.7516 14.9084 15.5783 15.5552 15.2492 16.1253H8.75083C8.42162 15.5551 8.24835 14.9082 8.24845 14.2498C8.24856 13.5914 8.42203 12.9446 8.75143 12.3745C9.08082 11.8044 9.55453 11.3311 10.1249 11.0021C10.6953 10.6732 11.3422 10.5002 12.0006 10.5006ZM16.6378 16.1253C16.9443 15.3664 17.0598 14.5439 16.9741 13.7299C16.8884 12.916 16.6043 12.1355 16.1466 11.457C15.6888 10.7786 15.0715 10.2228 14.3489 9.83863C13.6262 9.45443 12.8203 9.25351 12.0019 9.25351C11.1834 9.25351 10.3775 9.45443 9.65486 9.83863C8.9322 10.2228 8.31492 10.7786 7.85719 11.457C7.39947 12.1355 7.1153 12.916 7.02965 13.7299C6.94399 14.5439 7.05946 15.3664 7.36591 16.1253H2.62496C2.45921 16.1253 2.30025 16.1911 2.18305 16.3083C2.06584 16.4255 2 16.5845 2 16.7503C2 16.916 2.06584 17.075 2.18305 17.1922C2.30025 17.3094 2.45921 17.3752 2.62496 17.3752H21.3738C21.5395 17.3752 21.6985 17.3094 21.8157 17.1922C21.9329 17.075 21.9988 16.916 21.9988 16.7503C21.9988 16.5845 21.9329 16.4255 21.8157 16.3083C21.6985 16.1911 21.5395 16.1253 21.3738 16.1253H16.6366H16.6378ZM2.00125 14.2504C2.00125 14.0847 2.06709 13.9257 2.1843 13.8085C2.3015 13.6913 2.46046 13.6255 2.62621 13.6255H5.12605C5.2918 13.6255 5.45077 13.6913 5.56797 13.8085C5.68517 13.9257 5.75102 14.0847 5.75102 14.2504C5.75102 14.4162 5.68517 14.5751 5.56797 14.6923C5.45077 14.8095 5.2918 14.8754 5.12605 14.8754H2.62621C2.46046 14.8754 2.3015 14.8095 2.1843 14.6923C2.06709 14.5751 2.00125 14.4162 2.00125 14.2504ZM18.2502 14.2504C18.2502 14.0847 18.3161 13.9257 18.4333 13.8085C18.5505 13.6913 18.7094 13.6255 18.8752 13.6255H21.375C21.5408 13.6255 21.6998 13.6913 21.817 13.8085C21.9342 13.9257 22 14.0847 22 14.2504C22 14.4162 21.9342 14.5751 21.817 14.6923C21.6998 14.8095 21.5408 14.8754 21.375 14.8754H18.8752C18.7094 14.8754 18.5505 14.8095 18.4333 14.6923C18.3161 14.5751 18.2502 14.4162 18.2502 14.2504Z" fill="black"/>
                            </svg>
                        </span>Sunrise:</p>
                        <p>${moment(UTCsunrise).format('hh:ss a')}</p>
                    </li>
    
                    <li class="container__about__weather__item">
                        <p><span class="icon4">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M11.5582 7.8172C11.6162 7.8754 11.6852 7.92158 11.7611 7.95308C11.837 7.98459 11.9184 8.0008 12.0006 8.0008C12.0828 8.0008 12.1642 7.98459 12.2402 7.95308C12.3161 7.92158 12.385 7.8754 12.4431 7.8172L14.318 5.94232C14.3761 5.88421 14.4222 5.81523 14.4536 5.73931C14.4851 5.66339 14.5013 5.58202 14.5013 5.49984C14.5013 5.41767 14.4851 5.3363 14.4536 5.26038C14.4222 5.18446 14.3761 5.11548 14.318 5.05737C14.2599 4.99927 14.1909 4.95317 14.115 4.92173C14.0391 4.89028 13.9577 4.87409 13.8755 4.87409C13.7933 4.87409 13.712 4.89028 13.636 4.92173C13.5601 4.95317 13.4911 4.99927 13.433 5.05737L12.6256 5.86607V3.62496C12.6256 3.45921 12.5597 3.30025 12.4425 3.18305C12.3253 3.06584 12.1664 3 12.0006 3C11.8349 3 11.6759 3.06584 11.5587 3.18305C11.4415 3.30025 11.3757 3.45921 11.3757 3.62496V5.86607L10.5682 5.05737C10.5101 4.99927 10.4411 4.95317 10.3652 4.92173C10.2893 4.89028 10.2079 4.87409 10.1257 4.87409C10.0436 4.87409 9.9622 4.89028 9.88628 4.92173C9.81036 4.95317 9.74138 4.99927 9.68327 5.05737C9.62516 5.11548 9.57907 5.18446 9.54762 5.26038C9.51618 5.3363 9.49999 5.41767 9.49999 5.49984C9.49999 5.58202 9.51618 5.66339 9.54762 5.73931C9.57907 5.81523 9.62516 5.88421 9.68327 5.94232L11.5582 7.8172V7.8172ZM4.92982 7.17974C5.04701 7.06258 5.20595 6.99676 5.37166 6.99676C5.53738 6.99676 5.69631 7.06258 5.81351 7.17974L7.5809 8.94588C7.69474 9.06375 7.75774 9.22161 7.75631 9.38548C7.75489 9.54934 7.68916 9.70609 7.57329 9.82196C7.45742 9.93783 7.30067 10.0036 7.1368 10.005C6.97294 10.0064 6.81508 9.94342 6.69721 9.82957L4.92982 8.06218C4.81265 7.94499 4.74684 7.78605 4.74684 7.62034C4.74684 7.45462 4.81265 7.29569 4.92982 7.17849V7.17974ZM19.0714 7.17974C19.1882 7.29688 19.2538 7.45555 19.2538 7.62096C19.2538 7.78637 19.1882 7.94504 19.0714 8.06218L17.304 9.82957C17.2464 9.88926 17.1774 9.93687 17.1012 9.96963C17.0249 10.0024 16.9429 10.0196 16.8599 10.0203C16.777 10.0211 16.6947 10.0053 16.6179 9.97383C16.5411 9.9424 16.4713 9.896 16.4126 9.83732C16.3539 9.77864 16.3075 9.70886 16.2761 9.63206C16.2447 9.55525 16.2289 9.47296 16.2296 9.38998C16.2303 9.30699 16.2475 9.22499 16.2803 9.14874C16.313 9.07249 16.3607 9.00353 16.4203 8.94588L18.1877 7.17849C18.3049 7.06133 18.4639 6.99551 18.6296 6.99551C18.7953 6.99551 18.9542 7.06133 19.0714 7.17849V7.17974ZM12.0006 10.4995C12.6589 10.4993 13.3057 10.6724 13.8759 11.0015C14.4461 11.3305 14.9196 11.8038 15.2489 12.3739C15.5781 12.944 15.7515 13.5907 15.7515 14.249C15.7516 14.9073 15.5783 15.5541 15.2492 16.1242H8.75083C8.42162 15.554 8.24835 14.9071 8.24845 14.2487C8.24856 13.5903 8.42203 12.9435 8.75143 12.3734C9.08082 11.8033 9.55453 11.3299 10.1249 11.001C10.6953 10.6721 11.3422 10.4991 12.0006 10.4995V10.4995ZM16.6378 16.1242C16.9443 15.3653 17.0598 14.5428 16.9741 13.7288C16.8884 12.9149 16.6043 12.1344 16.1466 11.4559C15.6888 10.7775 15.0715 10.2217 14.3489 9.83752C13.6262 9.45332 12.8203 9.2524 12.0019 9.2524C11.1834 9.2524 10.3775 9.45332 9.65486 9.83752C8.9322 10.2217 8.31492 10.7775 7.85719 11.4559C7.39947 12.1344 7.1153 12.9149 7.02965 13.7288C6.94399 14.5428 7.05946 15.3653 7.36591 16.1242H2.62496C2.45921 16.1242 2.30025 16.19 2.18305 16.3072C2.06584 16.4244 2 16.5834 2 16.7491C2 16.9149 2.06584 17.0739 2.18305 17.1911C2.30025 17.3083 2.45921 17.3741 2.62496 17.3741H21.3738C21.5395 17.3741 21.6985 17.3083 21.8157 17.1911C21.9329 17.0739 21.9988 16.9149 21.9988 16.7491C21.9988 16.5834 21.9329 16.4244 21.8157 16.3072C21.6985 16.19 21.5395 16.1242 21.3738 16.1242H16.6366H16.6378ZM2.00125 14.2493C2.00125 14.0835 2.06709 13.9246 2.1843 13.8074C2.3015 13.6902 2.46046 13.6243 2.62621 13.6243H5.12605C5.2918 13.6243 5.45077 13.6902 5.56797 13.8074C5.68517 13.9246 5.75102 14.0835 5.75102 14.2493C5.75102 14.415 5.68517 14.574 5.56797 14.6912C5.45077 14.8084 5.2918 14.8743 5.12605 14.8743H2.62621C2.46046 14.8743 2.3015 14.8084 2.1843 14.6912C2.06709 14.574 2.00125 14.415 2.00125 14.2493ZM18.2502 14.2493C18.2502 14.0835 18.3161 13.9246 18.4333 13.8074C18.5505 13.6902 18.7094 13.6243 18.8752 13.6243H21.375C21.5408 13.6243 21.6998 13.6902 21.817 13.8074C21.9342 13.9246 22 14.0835 22 14.2493C22 14.415 21.9342 14.574 21.817 14.6912C21.6998 14.8084 21.5408 14.8743 21.375 14.8743H18.8752C18.7094 14.8743 18.5505 14.8084 18.4333 14.6912C18.3161 14.574 18.2502 14.415 18.2502 14.2493Z" fill="black"/>
                            </svg>
                        </span>Sunset:</p>
                        <p>${moment(UTCsunset).format('hh:ss a')}</p>
                    </li>
    
                    <li class="container__about__weather__item">
                        <p><span>
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M7.52635 4.00001C7.52635 3.44772 7.97406 3 8.52635 3H10.3158C10.8681 3 11.3158 3.44772 11.3158 4V14.7303C12.2358 15.3435 12.8422 16.3904 12.8422 17.579C12.8422 19.4682 11.3105 21 9.42128 21C7.53177 21 6 19.4682 6 17.579C6 16.3904 6.60651 15.3435 7.52646 14.7303L7.52635 4.00001ZM8.63146 4.49252H10.2105V12.5364H8.63146V4.49252Z" fill="black"/>
                            <path d="M16.5053 12.0063L16.5 6.00131L15.5 6.00219L15.5053 12.0072L14.0053 12.0085L16.007 14.0018L18.0053 12.005L16.5053 12.0063Z" fill="black"/>
                            </svg>
                        </span>Temp min:</p>
                        <p>${Math.round(values.tempMin - 273.15) + '°C'}</p>
                    </li>
    
                    <li class="container__about__weather__item">
                        <p><span>
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M7.52635 4.00001C7.52635 3.44772 7.97406 3 8.52635 3H10.3158C10.8681 3 11.3158 3.44772 11.3158 4V14.7303C12.2358 15.3435 12.8422 16.3904 12.8422 17.579C12.8422 19.4682 11.3105 21 9.42128 21C7.53177 21 6 19.4682 6 17.579C6 16.3904 6.60651 15.3435 7.52646 14.7303L7.52635 4.00001ZM8.63146 4.49252H10.2105V8.53637H8.63146V4.49252Z" fill="black"/>
                            <path d="M15.5 7.995L15.5 14L16.5 14L16.5 7.995L18 7.995L16 6L14 7.995L15.5 7.995Z" fill="black"/>
                            </svg>
                        </span>Temp max:</p>
                        <p>${Math.round(values.tempMax - 273.15) + '°C'}</p>
                    </li>
    
                    <li class="container__about__weather__item">
                        <p><span>               
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M5.52635 4.00001C5.52635 3.44772 5.97406 3 6.52635 3H8.31579C8.86807 3 9.31579 3.44772 9.31579 4V14.7303C10.2358 15.3435 10.8422 16.3904 10.8422 17.579C10.8422 19.4682 9.31047 21 7.42128 21C5.53177 21 4 19.4682 4 17.579C4 16.3904 4.60651 15.3435 5.52646 14.7303L5.52635 4.00001ZM6.63146 4.49252H8.21051V8.53637H6.63146V4.49252Z" fill="black"/>
                            <path d="M13.5 7.995L13.5 14L14.5 14L14.5 7.995L16 7.995L14 6L12 7.995L13.5 7.995Z" fill="black"/>
                            <path d="M18.5121 12.008L18.5 6.00303L17.5 6.00504L17.5121 12.01L16.0121 12.0131L18.0161 14.004L20.0121 12.005L18.5121 12.008Z" fill="black"/>
                            </svg>
                        </span>Feels like:</p>
                        <p>${Math.round(values.tempFeelsLike - 273.15) + '°C'}</p>
                    </li>
    
                    <li class="container__about__weather__item">
                        <p><span>
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M5.25 4V6.25C5.25 7.1225 5.48347 7.80459 5.67188 8.38281C5.86028 8.96103 6 9.43244 6 10C6 10.4339 5.74383 10.8714 5.36719 11.4531C4.99054 12.0349 4.5 12.7619 4.5 13.75C4.5 14.6101 4.73515 15.276 4.92188 15.8359C5.1086 16.3959 5.25 16.8532 5.25 17.5H3L6 20.5L9 17.5H6.75C6.75 16.6093 6.5164 15.9318 6.32812 15.3672C6.13985 14.8025 6 14.3539 6 13.75C6 13.2741 6.25946 12.8266 6.63281 12.25C7.00617 11.6734 7.5 10.9686 7.5 10C7.5 9.16506 7.26472 8.51015 7.07812 7.9375C6.89153 7.36485 6.75 6.8715 6.75 6.25V4H5.25ZM12 4V6.25C12 7.1225 12.2335 7.80459 12.4219 8.38281C12.6103 8.96103 12.75 9.43244 12.75 10C12.75 10.4339 12.4938 10.8714 12.1172 11.4531C11.7405 12.0349 11.25 12.7619 11.25 13.75C11.25 14.6101 11.4852 15.276 11.6719 15.8359C11.8586 16.3959 12 16.8532 12 17.5H9.75L12.75 20.5L15.75 17.5H13.5C13.5 16.6093 13.2664 15.9318 13.0781 15.3672C12.8898 14.8025 12.75 14.3539 12.75 13.75C12.75 13.2741 13.0095 12.8266 13.3828 12.25C13.7562 11.6734 14.25 10.9686 14.25 10C14.25 9.16506 14.0147 8.51015 13.8281 7.9375C13.6415 7.36485 13.5 6.8715 13.5 6.25V4H12ZM17.25 4V5.5H21V4H17.25ZM18.75 7.75V9.25H21V7.75H18.75ZM17.25 11.5V13H21V11.5H17.25ZM18.75 15.25V16.75H21V15.25H18.75ZM17.25 19V20.5H21V19H17.25Z" fill="black"/>
                            </svg>
                        </span>Pressure:</p>
                        <p>${values.pressure} hPa</p>
                    </li>
    
                    <li class="container__about__weather__item">
                        <p><span>
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.087 4V5.5H21V4H17.087ZM8.47826 4.07031L7.81793 5.10156C7.81793 5.10156 6.63429 6.93244 5.44565 9.08594C4.85133 10.1627 4.2385 11.3234 3.78261 12.3906C3.32672 13.4579 3 14.4023 3 15.25C3 18.1408 5.46183 20.5 8.47826 20.5C11.4947 20.5 13.9565 18.1408 13.9565 15.25C13.9565 14.4023 13.6298 13.4579 13.1739 12.3906C12.718 11.3234 12.1052 10.1627 11.5109 9.08594C10.3222 6.93244 9.13859 5.10156 9.13859 5.10156L8.47826 4.07031ZM8.47826 7C8.88323 7.64435 9.31063 8.28411 10.1413 9.78906C10.5918 10.6053 11.0159 11.4413 11.3886 12.25H5.56793C5.94066 11.4413 6.36469 10.6053 6.81522 9.78906C7.64589 8.28411 8.07329 7.64435 8.47826 7ZM18.6522 7.75V9.25H21V7.75H18.6522ZM17.087 11.5V13H21V11.5H17.087ZM18.6522 15.25V16.75H21V15.25H18.6522ZM17.087 19V20.5H21V19H17.087Z" fill="black"/>
                            </svg>
                        </span>Humidity:</p>
                        <p>${values.humidity} %</p>
                    </li>
    
                    <li class="container__about__weather__item">
                        <p><span>
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12.0003 7C8.1863 7 4.84596 9.19124 3 12.4715C4.84596 15.7517 8.18614 17.9431 12.0003 17.9431C15.8144 17.9431 19.154 15.7518 21 12.4715C19.1538 9.19113 15.8141 7 12.0003 7V7ZM12.0003 16.3636C9.85039 16.3636 8.10812 14.6209 8.10812 12.4714C8.10812 10.3216 9.85039 8.57929 12.0003 8.57929C14.1499 8.57929 15.8924 10.3216 15.8924 12.4714C15.8924 14.6211 14.1499 16.3636 12.0003 16.3636ZM12.0003 10.2366C10.7661 10.2366 9.76532 11.2373 9.76532 12.4715C9.76532 13.7058 10.766 14.7065 12.0003 14.7065C13.2345 14.7065 14.235 13.7058 14.235 12.4715C14.235 11.2373 13.2345 10.2366 12.0003 10.2366V10.2366Z" fill="black"/>
                            </svg>
                        </span>Visibility:</p>
                        <p>${values.visibility} m</p>
                    </li>
    
                    <li class="container__about__weather__item">
                        <p><span>
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M17.6168 17.1339L17.6056 17.1227L17.6058 17.1226C19.5326 16.9876 21.0493 15.3587 20.9988 13.387C20.9481 11.5782 19.5045 10.0277 17.7069 9.85358C17.102 9.78883 16.7392 9.87779 16.5178 9.93206C16.3339 9.97718 16.2476 9.99832 16.2014 9.88729C15.5554 8.19651 13.9263 7 12.0108 7C9.65688 7 7.73015 8.80895 7.5391 11.1122C7.52778 11.2077 7.43238 11.2638 7.34246 11.2245C6.77517 10.9716 6.11784 10.8818 5.42692 11.0278C4.26411 11.2694 3.32032 12.2018 3.07319 13.3647C2.65754 15.3025 4.06748 17.0216 5.90441 17.1283V17.1339H17.6168ZM9 13.125H13.5038V12L15 13.5L13.5038 15V13.875H9V13.125Z" fill="black"/>
                            </svg>
                        </span>Wind speed:</p>
                        <p>${values.windSpeed.toFixed(1)} m/s</p>
                    </li>
    
                </ul>
    
                <div class="container__about__weather__city" >
                    <div class="container__about__weather__detailed" style="width: 391px;">
                        <div style="font-size: 24px;">${moment(UTCtime).format('llll')}</div>
                        <div style="font-size: 58px; font-weight: 700; color: #508487; height: 134px;">${values.city}, ${values.country}</div>
                        <div>
                            <div style="font-size: 58px; color: #508487; width: 45%; ">
                                ${Math.round(values.temp - 273.15) + '°C'}
                            </div>
                            <div style="display: flex; flex-direction: column; width: 160px;  background: rgba(25, 77, 106, .1); border-radius: 10px;">
                                <img src="http://openweathermap.org/img/wn/${values.icon}@2x.png" style="width: 48px; height: 48px;">
                                <p style="font-weight: bold; margin: 5px;"> ${values.weatherTypeDescription} </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        `;
    
        const forecast5Days = function (value) {
            mainBlock.innerHTML += `<section class='main__forecast'></section>`;
            let section = document.querySelector('.main__forecast');
            value.list.forEach(el => {
    
                const elements = {
                    dayTime     : el.dt_txt,
                    dayTime     : el.dt_txt,
                    temp        : el.main.temp,
                    humidity    : el.main.humidity,
                    pressure    : el.main.pressure,
                    description : el.weather[0].description,
                    icon        : el.weather[0].icon,
                    windSpeed   : el.wind.speed,
                };
                section.innerHTML += 
                `
                    <div class='main__forecast__block'>
                        <div style="display: flex; justify-content: space-between;">${el.dt_txt.slice(0, 10)}<span style="font-weight: bold;">${el.dt_txt.slice( -8 )}</span></div>
                        <div style="display: flex; justify-content: space-between; margin-top: 12px;">Temperature: <span style="font-weight: bold;">${Math.round(elements.temp - 273.15) + '°C'}</span></div>
                        <div style="display: flex; justify-content: space-between; margin-top: 12px;">Humidity: <span style="font-weight: bold;">${elements.humidity} %</span></div>
                        <div style="display: flex; justify-content: space-between; margin-top: 12px;">Pressure: <span style="font-weight: bold;">${elements.pressure} hPa</span></div>
                        <div style="background: rgba(25, 77, 106, .2); border-radius: 10px; margin-top: 12px; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center;">
                            <img style="width: 48px; height: 48px" src="http://openweathermap.org/img/wn/${elements.icon}@2x.png">
                            <div style="font-weight: bold;">${elements.description}</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 12px;">Wind speed: <span style="font-weight: bold;">${elements.windSpeed.toFixed(1)} m/s</span>
                        </div>
                    </div>
                `;
            });
        };
    
        forecast5Days(dataForecast);
    
            console.log('current date >>>', dataCurrent);
            console.log('current date >>>', dataForecast);

    }).catch(err => {
        if(err) {
            mainBlock.style.overflow = "hidden";
            mainBlock.innerHTML = 
            `
                <p style="font-size: 24px; text-transform: uppercase; color: rgb(80, 132, 135)">City not found</p>
            `;
        };
    }); 
};

window.addEventListener('load', () => {
    query = localStorage.getItem('lastRequest');
    cityRequest();
    console.log(query);
});


